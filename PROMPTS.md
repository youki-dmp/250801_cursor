# 最適化済みプロンプトのメモ

このファイルは、開発過程で最適化された、高性能なプロンプトを記録するためのものです。

---
## バックエンド用プロンプト (AI連携)

**目的:** 画像を分析し、内容と画像内の文字を元に、整形された日本語のタグリストを生成する。

**モデル:** `gemini-1.5-flash-latest`

**プロンプト本文:**
```text
この画像を分析し、内容に最も関連する日本語のタグを生成してください。画像内の文字（特に漢字）も正確に読み取り、タグに含めてください。以下のルールに厳密に従ってください。

1. 応答には、カンマ区切りの日本語タグのリストのみを含めてください。
2. 説明、前置き、その他の会話文は一切含めないでください。
3. タグは5個から7個生成してください。

例：
入力： (猫が写っている画像)
出力： 猫,動物,ペット,かわいい,室内

あなたの応答は、この形式に厳密に従う必要があります。
```

---
## フロントエンド用プロンプト (HTML)

**目的:** AI画像タグ付けギャラリーの基本的な骨格となるHTMLを作成する。

**プロンプト:**
```html
AI画像タグ付けギャラリーのHTMLを作成してください。全体のコンテナの中に、以下の要素を含めてください。

- `h1`のメインタイトルと、簡単な説明文の`p`タグ
- ファイル選択のための`<input type="file">`。ただし、input自体は非表示にし、`label`タグをボタンのように見せるスタイルを適用できるようにする。
- 結果表示用の`div`要素。この中には、プレビュー画像を表示する`img`タグと、タグ一覧を表示するための`div`を配置する。この結果表示エリアは、初期状態では非表示にしておく。
- AIの処理中に表示するローディングインジケーター用の`div`。スピナーと「解析中です...」のようなテキストを入れる。これも初期状態では非表示にする。
- 必要なCSSファイルとJSファイルを読み込むように設定する。
```

---
## フロントエンド用プロンプト (CSS)

**目的:** AI画像タグ付けギャラリーに、モダンでクリーンなデザインを適用する。

**プロンプト:**
```css
AI画像タグ付けギャラリーのスタイルシートを作成してください。全体のデザインは、白を基調とした清潔感のあるモダンなデザインとします。

- ページ全体の背景色を薄いグレーに設定し、コンテンツを中央に配置する。
- メインのコンテナは、白い背景に角丸と影（box-shadow）を付けて、カードのように見せる。
- ファイル選択ボタン（`label`タグ）は、青系の背景色で、マウスオーバー時に色が少し濃くなるように設定する。
- プレビュー画像は、コンテナの幅に収まるようにし、角丸と薄い影を付ける。
- 生成されたタグは、一つずつが角丸のついた薄い背景色のついた「カプセル」のように見えるスタイルにする。タグ一覧は`flexbox`を使って、横に並べて表示し、必要に応じて折り返すようにする。
- ローディングインジケーターのスピナーは、CSSアニメーション（`@keyframes`）を使って回転するように実装する。
```

---
## フロントエンド用プロンプト (JavaScript)

**目的:** AI画像タグ付けギャラリーのフロントエンドロジックを実装する。

**プロンプト:**
```javascript
AI画像タグ付けギャラリーのJavaScriptを作成してください。主なロジックは以下の通りです。

1.  HTMLの各要素（ファイル入力、結果エリア、プレビュー画像、タグ出力場所、ローディング表示）を取得します。
2.  ファイル入力（`input`要素）で`change`イベントを監視します。
3.  ファイルが選択されたら、以下の処理を実行します。
    a. 以前の結果が残っていれば、それをリセット（非表示に）します。
    b. `FileReader`を使って、選択された画像を読み込み、プレビュー画像に表示します。
    c. ローディング表示を有効にします。
    d. `fetch` APIを使い、サーバーの`/api/generate-tags`エンドポイントに`POST`リクエストを送信します。
        - リクエストボディには、読み込んだ画像データをBase64エンコードした文字列を`imageData`というキーのJSON形式で含めます。
    e. リクエストが成功したら、レスポンスのJSONからタグの配列を取得し、画面に表示する関数を呼び出します。
    f. リクエストが失敗した場合は、`alert`でエラーを通知し、コンソールにエラー内容を出力します。
    g. 処理が成功しても失敗しても、最終的にはローディング表示を非表示にします。
4.  タグの配列を受け取って、一つずつDOM要素（例: `div`）を生成し、画面に追加する関数を別途作成します。
```